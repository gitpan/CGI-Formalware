<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>C&lt;CGI::Formalware&gt; - Convert an XML file into a suite of CGI forms.</title>
<link rev="made" href="mailto:" />
</head>

<body style="background-color: white">

<p><a name="__index__"></a></p>
<!-- INDEX BEGIN -->

<ul>

	<li><a href="#name">NAME</a></li>
	<li><a href="#synopsis">SYNOPSIS</a></li>
	<li><a href="#description">DESCRIPTION</a></li>
	<li><a href="#installation">INSTALLATION</a></li>
	<li><a href="#audience">AUDIENCE</a></li>
	<li><a href="#security">SECURITY</a></li>
	<li><a href="#constructor_new">CONSTRUCTOR new</a></li>
	<li><a href="#highlights">HIGHLIGHTS</a></li>
	<li><a href="#navigation">NAVIGATION</a></li>
	<li><a href="#cascading_style_sheets">CASCADING STYLE SHEETS</a></li>
	<li><a href="#environment_variables">ENVIRONMENT VARIABLES</a></li>
	<li><a href="#input_data_validation">INPUT DATA VALIDATION</a></li>
	<li><a href="#xml_dtd">XML DTD</a></li>
	<li><a href="#xml_file_format">XML FILE FORMAT</a></li>
	<li><a href="#nested_forms">NESTED FORMS</a></li>
	<li><a href="#required_modules">REQUIRED MODULES</a></li>
	<li><a href="#author">AUTHOR</a></li>
	<li><a href="#licence">LICENCE</a></li>
</ul>
<!-- INDEX END -->

<hr />
<p>
</p>
<h1><a name="name">NAME</a></h1>
<p><code>CGI::Formalware</code> - Convert an XML file into a suite of CGI forms.</p>
<p>
</p>
<hr />
<h1><a name="synopsis">SYNOPSIS</a></h1>
<p>In your browser, type: localhost/cgi-bin/x.pl</p>
<p>where x.pl contains nothing more than:</p>
<pre>
        #!perl -w
        use strict;
        use lib 'C:/Perl';
        use lib 'C:/Perl/Scripts/General';      # Ie $PERL5LIB.
        use CGI::Formalware;
        my($form) = CGI::Formalware -&gt; new({form2file =&gt; 1, debug =&gt; 1});
        $form -&gt; process();
        exit(0);</pre>
<p>Upon starting, <code>CGI::Formalware</code> asks for the name of your XML file, which
is assumed to be in cgi-bin/.</p>
<p>
</p>
<hr />
<h1><a name="description">DESCRIPTION</a></h1>
<p>To provide a type of repository for frequently used scripts, which can then be executed
locally or remotely (via Net::Telnet), by just entering a password (for remote scripts),
and clicking.</p>
<p>
</p>
<hr />
<h1><a name="installation">INSTALLATION</a></h1>
<p>You install <code>CGI::Formalware</code>, as you would install any perl module library,
by running these commands:</p>
<pre>
        perl Makefile.PL
        make
        make test
        make install</pre>
<p>If you want to install a private copy of <code>CGI::Formalware</code> in your home
directory, then you should try to produce the initial Makefile with
something like this command:</p>
<pre>
        perl Makefile.PL LIB=~/perl
                or
        perl Makefile.PL LIB=C:/Perl/Site/Lib</pre>
<p>If, like me, you don't have permission to write man pages into unix system
directories, use:</p>
<pre>
        make pure_install</pre>
<p>instead of make install. This option is secreted in the middle of p 414 of the
second edition of the dromedary book.</p>
<p>
</p>
<hr />
<h1><a name="audience">AUDIENCE</a></h1>
<p>Webmasters.</p>
<p>
</p>
<hr />
<h1><a name="security">SECURITY</a></h1>
<p>None. Even worse, <code>CGI::Formalware</code> is designed to circumvent a web server's
concept of what Apache calls DocumentRoot.</p>
<p>
</p>
<hr />
<h1><a name="constructor_new">CONSTRUCTOR new</a></h1>
<p>new takes either no parameters, or an anonymous hash. See the example above.
Keys and values recognized are:</p>
<ul>
<li></li>
debug =&gt; 1 means turn on debugging. At the moment this opens and closes the
file CGI-Formalware.log, but does not write anything to it
<p></p>
<li></li>
form2file =&gt; 1 means output each form to a file, using the name given
by the form's formFileName attribute. The forms are written to cgi-bin/.
If the form has no such attribute, this option is ignored. See example below
<p></p>
<li></li>
timeScripts =&gt; 1 means report elapsed time at the end of each script's output
<p></p></ul>
<p>
</p>
<hr />
<h1><a name="highlights">HIGHLIGHTS</a></h1>
<ul>
<li></li>
Read an XML file, whose format is fixed, and generate a suite of CGI forms
<p></p>
<li></li>
A cascading style sheet can be specified for each form individually
<p></p>
<li></li>
A Table of Contents may appear on each form
<p></p>
<li></li>
Each form is more-or-less assumed to contain a list of scripts
<p></p>
<li></li>
Tokens in the XML correspond to a few functions available in Lincoln Stein's
CGI.pm. Available tokens are:
<ul>
<li></li>
fileField
<pre>
        &lt;fileField
                name            = 'fileName'
                prompt          = 'Filename: '
                size            = '60'
                override        = '0'
        /&gt;</pre>
<p></p>
<li></li>
horizontalRule
<pre>
        &lt;horizontalRule /&gt;</pre>
<p></p>
<li></li>
paragraph
<pre>
        &lt;paragraph /&gt;</pre>
<pre>
        &lt;paragraph text = 'Output a comment' /&gt;</pre>
<p></p>
<li></li>
radioGroup
<pre>
        &lt;radioGroup
                name            = 'serverName'
                prompt          = 'Server name: '
                value           = 'Example|Simple|Test'
                columns         = '1'   # Optional. Defaults to '1'. Use a string, not a digit
        /&gt;</pre>
<p></p>
<li></li>
textField
<pre>
        &lt;textField
                name            = 'username'
                prompt          = 'Username: '
                value           = ''
                size            = '15'
                override        = '0'
        /&gt;</pre>
<p></p></ul>
<p>Over time, more functions will be added.</p>
<li></li>
A textField with the name 'password' is treated as a password field. Also,
the entity 'script' defines a Unix- or DOS-type batch file
<p></p>
<li></li>
These entities produce on-screen fields, or, in the case of the scripts, a
vertical array of radio buttons
<p></p>
<li></li>
So, to run a script you fill in whatever fields the script uses and then select
that script
<p></p>
<li></li>
Macros in the scripts, eg %fileName% are expanded with the current value of the
field whose name appears between the % signs
<p></p>
<li></li>
A script whose last line is 'ftp <strong>-n</strong> <strong>-v</strong>' is recognized and handled specially.
Your form must contain textFields called 'host', 'username' and 'password' and
'fileName'. A binary 'get' is performed. This will be made more flexible one day
<p></p>
<li></li>
Scripts have an attribute 'type', which can be 'local' or 'remote'.
<p>Remote scripts are passed to Net::Telnet, on the assumption that you know what
you are doing. Your form must contain textFields called 'host', 'username' and
'password'</p>
<p></p></ul>
<p>
</p>
<hr />
<h1><a name="navigation">NAVIGATION</a></h1>
<p>Forms are linked with 'Previous form', 'Next form' buttons.</p>
<p>Any previously-entered textFields, except those whose name is 'password', are
remembered when you return to a form. This is very convenient.</p>
<p>The password values are zapped by CGI.pm, not by me. This is a security feature.
It means you can walk away from your system and not have someone gain automatic
access to a remote system.</p>
<p>
</p>
<hr />
<h1><a name="cascading_style_sheets">CASCADING STYLE SHEETS</a></h1>
<p>Each form entity may have a 'css' attribute, giving the name of the CSS file for
that form. These attribute values are like '/CGI-Formalware.css', which, under
Apache, means this value is prefixed with DocumentRoot. That is, the path to the
CSS is a URI, and will not be seen if in cgi-bin/.</p>
<p>The compulsory elements are: H1, H2 and P.TOC.</p>
<p>Herewith a sample:</p>
<pre>
        H1
        {
                font-size:                      20pt;
                alignment:                      center;
                color:                          teal;
        }</pre>
<pre>
        H2
        {
                font-size:                      16pt;
                font-style:                     italic;
                color:                          maroon;
        }</pre>
<pre>
        P.TOC
        {
                font-size:                      12pt;
                color:                          white;
                background-color:       blue;
        }</pre>
<p>
</p>
<hr />
<h1><a name="environment_variables">ENVIRONMENT VARIABLES</a></h1>
<p>None.</p>
<p>
</p>
<hr />
<h1><a name="input_data_validation">INPUT DATA VALIDATION</a></h1>
<p>These checks are performed:</p>
<ul>
<li></li>
Each forms entity may have a 'tocEntry' attribute. If present, and if
the tocVisible attribute is 'true', then a Table of Contents is put on
each form, headed by this text. The default is 'Contents'
<p></p>
<li></li>
Each forms entity may have a 'tocVisible' attribute. If its value is 'True',
then a Table of Contents is put on each form, headed by the value of
'tocEntry'. The default is 'True'
<p></p>
<li></li>
Each form entity must have 'heading' and 'tocEntry' attributes
<p></p>
<li></li>
Each form entity must have a unique 'heading' attribute
<p></p>
<li></li>
Each form entity may have a unique 'formFileName' attribute. If present, then
this file name is used to output the form to a file if the constructor option
new({form2file =&gt; 1}) is used
<p></p>
<li></li>
Each fileField entity must have 'name', 'prompt', 'value' and 'size' attributes
<p></p>
<li></li>
Each textField entity must have 'name', 'prompt', 'value' and 'size' attributes
<p></p>
<li></li>
Each scripts entity must have a 'heading' attribute
<p></p>
<li></li>
Each script entity must have 'heading', 'type' and 'line' attributes
<p></p>
<li></li>
Each script entity must have a unique 'heading' attribute
<p></p>
<li></li>
Each script entity's 'type' attribute must be 'local' or 'remote'
<p></p></ul>
<p>
</p>
<hr />
<h1><a name="xml_dtd">XML DTD</a></h1>
<p>TBA.</p>
<p>
</p>
<hr />
<h1><a name="xml_file_format">XML FILE FORMAT</a></h1>
<p>Herewith a sample:</p>
<pre>
        &lt;forms
                tocEntry        = 'Forms'
                tocVisible      = 'True'
        &gt;
        &lt;form
                heading                 = 'Unix Command Menu'
                tocEntry                = 'Unix menu'
                css                             = '/CGI-Formalware.css'
                formFileName    = '1.html'
        &gt;
                &lt;horizontalRule /&gt;</pre>
<pre>
                &lt;radioGroup
                        name    = 'host'
                        prompt  = 'Host: '
                        value   = 'bigBox|littleBox'
                /&gt;</pre>
<pre>
                &lt;paragraph /&gt;</pre>
<pre>
                &lt;textField
                        name            = 'username'
                        prompt          = 'Username: '
                        value           = ''
                        size            = '15'
                        override        = '0'
                /&gt;</pre>
<pre>
                &lt;textField
                        name            = 'password'
                        prompt          = '  Password: '
                        value           = ''
                        size            = '15'
                        override        = '0'
                /&gt;</pre>
<pre>
                &lt;horizontalRule /&gt;</pre>
<pre>
                &lt;scripts
                        heading                 = 'Unix Scripts'
                        numberScripts   = 'Yes'
                &gt;
                        &lt;script
                                heading         = 'Files in home directory'
                                type            = 'remote'
                                line1           = 'dir'
                        /&gt;
                        &lt;script
                                heading         = 'Tags in repository'
                                type            = 'remote'
                                line1           = 'cd $M'
                                line2           = 'getTags'
                        /&gt;
                &lt;/scripts&gt;
        &lt;/form&gt;</pre>
<pre>
        &lt;form
                heading         = 'DOS Command Menu'
                tocEntry        = 'DOS menu'
        &gt;</pre>
<pre>
                &lt;horizontalRule /&gt;</pre>
<pre>
                &lt;radioGroup
                        name    = 'host'
                        prompt  = 'Host: '
                        value   = 'bigBox|littleBox'
                /&gt;</pre>
<pre>
                &lt;paragraph text = 'Enter a username and a password.' /&gt;</pre>
<pre>
                &lt;textField
                        name            = 'username'
                        prompt          = 'Username: '
                        value           = ''
                        size            = '15'
                        override        = '0'
                /&gt;</pre>
<pre>
                &lt;textField
                        name            = 'password'
                        prompt          = '  Password: '
                        value           = ''
                        size            = '15'
                        override        = '0'
                /&gt;</pre>
<pre>
                &lt;horizontalRule /&gt;</pre>
<pre>
                &lt;fileField
                        name            = 'fileName'
                        prompt          = 'Filename: '
                        size            = '60'
                        override        = '0'
                /&gt;</pre>
<pre>
                &lt;horizontalRule /&gt;</pre>
<pre>
                &lt;scripts
                        heading = 'PC Scripts'
                &gt;</pre>
<pre>
                        &lt;script
                                heading         = 'Files in root directory'
                                type            = 'local'
                                line1           = 'cd \'
                                line2           = 'dir'
                        /&gt;
                        &lt;script
                                heading         = 'FTP something somewhere'
                                type            = 'local'
                                line1           = 'ftp -n -v'
                        /&gt;
                        &lt;script
                                heading         = 'Untar a file'
                                type            = 'local'
                                line1           = 'cd \'
                                line2           = 'tar mxvzf %fileName%'
                        /&gt;
                &lt;/scripts&gt;
        &lt;/form&gt;
        &lt;/forms&gt;</pre>
<p>
</p>
<hr />
<h1><a name="nested_forms">NESTED FORMS</a></h1>
<p>Nope, I don't recognize them. Maybe one day...</p>
<p>
</p>
<hr />
<h1><a name="required_modules">REQUIRED MODULES</a></h1>
<ul>
<li></li>
CGI
<p></p>
<li></li>
Net::Telnet
<p></p>
<li></li>
XML::DOM
<p></p></ul>
<p>
</p>
<hr />
<h1><a name="author">AUTHOR</a></h1>
<p><code>CGI::Formalware</code> was written by Ron Savage <em>&lt;<a href="mailto:ron@savage.net.au">ron@savage.net.au</a>&gt;</em>
in 1999.</p>
<p>Available from <a href="http://savage.net.au/Perl.html.">http://savage.net.au/Perl.html.</a></p>
<p>
</p>
<hr />
<h1><a name="licence">LICENCE</a></h1>
<p>Australian copyright (c) 1999 Ron Savage.</p>
<pre>
        All Programs of mine are 'OSI Certified Open Source Software';
        you can redistribute them and/or modify them under the terms of
        The Artistic License, a copy of which is available at:
        <a href="http://www.opensource.org/licenses/index.html">http://www.opensource.org/licenses/index.html</a></pre>

</body>

</html>
